# learn-assembly-arabic
شرح اساسيات التجميع
# مقدمة
لغة التجميع هي لغة برمجة منخفضة المستوى تُستخدم لتحويل التعليمات البشرية القابلة للقراءة إلى تعليمات يمكن لوحدة المعالجة المركزية (CPU) تنفيذها مباشرة. تُتيح هذه اللغة مستوى عالي من التحكم بالمكونات الصلبة للحاسوب، مما يجعلها مفيدة لتطوير البرامج ذات الأداء العالي والتحكم الدقيق.

# مكونات برنامج التجميع
برنامج التجميع يتكون من عدة أجزاء رئيسية:
1. **التوجيهات (Directives)**: تُعطى للمُجمّع لإعداد البيئة. مثلاً:
   - `section`: لتحديد أقسام البرنامج (مثل البيانات، التعليمات).
   - `global`: لتحديد نقطة البداية للبرنامج.
```assembly
section .data   ; قسم البيانات
section .text   ; قسم التعليمات
```

2. **التعليمات (Instructions)**: أوامر يتم تنفيذها بواسطة وحدة المعالجة المركزية. مثل:
   - `mov`: لنقل البيانات.
   - `add`: لتنفيذ العمليات الحسابية.
   - `jmp`: لتنفيذ القفزات.
```assembly
mov ax, 5      ; ax نقل القيمة 5 إلى السجل
add ax, 3      ; ax إضافة 3 إلى قيمة 
```
3. **التعليقات (Comments)**: نص غير قابل للتنفيذ يُستخدم لشرح الكود، تبدأ بالرمز `;`.



# الهيكل الأساسي لبرنامج التجميع

الهيكل الأساسي لأي برنامج بلغة التجميع يتكون من أقسام البيانات والتعليمات:


```assembly
section .data
    ; قسم البيانات لتخزين المتغيرات والثوابت

section .bss
    ; قسم غير مهيئ لتخزين المتغيرات

section .text
    global _start   ; النقطة الرئيسية للدخول
_start:
    ; التعليمات التي سيتم تنفيذها
```
```assembly
section .data   ; قسم البيانات
    num1 db 5   ; تخزين العدد 5
    num2 db 10  ; تخزين العدد 10
    result db 0 ; متغير لتخزين النتيجة

section .text   ; قسم التعليمات
    global _start
_start:
    ; هنا تبدأ التعليمات
```
# السجلات الأساسية

لدينا عدة سجلات مهمة x86، السجلات هي مكونات صغيرة من الذاكرة داخل وحدة المعالجة المركزية. تُستخدم لتخزين البيانات المؤقتة والعمليات الحسابية. وفي معمارية 

AX, BX, CX, DX: سجلات الأغراض العامة.
- **AX (Accumulator Register)**: يُستخدم في العمليات الحسابية.
- **BX (Base Register)**: يُستخدم في الوصول إلى الذاكرة.
- **CX (Count Register)**: يُستخدم كعداد.
- **DX (Data Register)**: يُستخدم في العمليات ذات الأرقام الكبيرة.

**أمثلة**:

```assembly
mov ax, 10     ;  ax نقل القيمة 10 إلى السجل
add bx, ax     ;  bx إلى ax إضافة قيمة 
```
SP (Stack Pointer): يُشير إلى أعلى المكدس.

BP (Base Pointer): يُستخدم في الوصول إلى المتغيرات المحلية.

SI, DI: تُستخدم في عمليات نقل البيانات.

IP (Instruction Pointer): يُشير إلى التعليمة التالية.

## سجلات الأغراض العامة (General Purpose Registers)
: x86 هذه السجلات تُستخدم لمجموعة واسعة من العمليات، بما في ذلك الحسابات ونقل البيانات. هناك ثمانية سجلات أغراض عامة في معمارية 

- **AX (Accumulator Register)**: يُستخدم في العمليات الحسابية وحفظ النتائج المؤقتة.
```assembly
mov ax, 1234h   ; ax الىj 1234h نقل القيمة
add ax, bx      ;   ax إلى bx إضافة محتويات 
```

- **BX (Base Register)**: غالبًا ما يُستخدم كمؤشر قاعدة في عمليات الوصول إلى الذاكرة.
```assembly
mov bx, [array] ; BX نقل قيمة المؤشر إلى 
```
 شرح أوضح :

  mov bx, [array]:

bx الى السجيل  array هذه التعليمات تعني نقل القيمة الموجودة في الذاكرة عند عنوان  



 [array]:
 هو عنوان في الذاكرة. array الأقواس المربعة تشير إلى أن

 bx: ويُستخدم لتخزين البيانات. (CPU)، هو أحد السجلات في وحدة المعالجة المركزية

- **CX (Count Register)**: يُستخدم كعداد في الحلقات وعمليات التحول.

```assembly
mov cx, 10      ; تعيين العداد إلى 10
loop_start:
; بعض التعليمات
loop loop_start ;   صفر CX تكرار حتى يصبح 
```



- **DX (Data Register)**: يُستخدم لتوسيع السجل AX في العمليات الحسابية ذات الأرقام الكبيرة، أو في عمليات الإدخال والإخراج.

```assembly
mov dx, ax      ; dx إلى axنقل محتويات 
```



## سجلات المؤشرات (Pointer Registers)
هذه السجلات تُستخدم للإشارة إلى عناوين في الذاكرة:

- **SP (Stack Pointer)**: يُشير إلى أعلى المكدس ويُستخدم في إدارة المكدس.
```assembly
push ax         ; إلى المكدس ax دفع محتويات
pop ax          ; ax سحب المحتويات من المكدس إلى
```


- **BP (Base Pointer)**: يُستخدم للوصول إلى المتغيرات المحلية في المكدس.
```assembly
mov bp, sp      ; BP نسخ مؤشر المكدس إلى 
mov ax, [bp-2]  ; قراءة متغير محلي
```


- **SI (Source Index)** و **DI (Destination Index)**: تُستخدم في عمليات نقل البيانات وسلاسل النصوص.

```assembly
mov si, source  ; تعيين مؤشر المصدر
mov di, dest    ; تعيين مؤشر الوجهة
movsb           ; ES:DI الى DS:SI نقل بايت من 
```



## سجل التعليمات (Instruction Pointer)
- **IP (Instruction Pointer)**: يُشير إلى عنوان التعليمة التالية التي سيتم تنفيذها.
```assembly
jmp label       ; label للقفز إلى IP تعيين
```


## سجل الأعلام (Flags Register)
- **FLAGS**: يحتوي على بتات تُشير إلى حالة المعالج. يحتوي على الأعلام التالية:
- **CF (Carry Flag)**: يُشير إلى تجاوز في العمليات الحسابية.
- **ZF (Zero Flag)**: يُشير إلى أن نتيجة العملية تساوي صفر.
- **SF (Sign Flag)**: يُشير إلى علامة النتيجة (موجب أو سالب).
- **OF (Overflow Flag)**: يُشير إلى تجاوز في العمليات ذات الأرقام الموقعة.


### أمثلة على الأعلام

#### CF (Carry Flag)
يُستخدم للإشارة إلى تجاوز في العمليات الحسابية، مثل عند حدوث تجاوز في عملية جمع.
```assembly
mov al, 0FFh   ; AL تحميل 255 إلى 
add al, 1      ; بسبب التجاوز CF إضافة 1، ستصبح النتيجة 0 مع تهيئة
```
#### ZF (Zero Flag)
يتم تهيئة هذا العلم إذا كانت نتيجة العملية تساوي صفرًا.

```assembly
mov ax, 5      ; AX تحميل 5 إلى 
sub ax, 5      ; يتم تهيئته ZF طرح 5، النتيجة ستكون صفر وبالتالي 
```
#### SF (Sign Flag)
يُشير إلى علامة النتيجة، سواء كانت موجبة أو سالبة.
```assembly
mov al, -1     ; AL تحميل -1 إلى 
                     ;سيتم تهيئته لأن النتيجة سالبة SF
```
#### OF (Overflow Flag)
يُستخدم للإشارة إلى تجاوز في العمليات ذات الأرقام الموقعة.
```assembly
mov al, 7Fh    ; تحميل 127 (الحد الأقصى للموجب في 8 بتات)
add al, 1      ; OF إضافة 1، ستصبح النتيجة -128 مع تهيئة 
```



## التعليمات الأساسية


### نقل البيانات:
mov dest, src:   .نقل البيانات من المصدر إلى الوجهة
```assembly
mov ax, 5   ;  ax نقل القيمة 5 إلى السجل 
```









### العمليات الحسابية:
add dest, src: إضافة المصدر إلى الوجهة.
```assembly
add ax, bx  ;  ax وتخزين النتيجة في ax الى bx اضافة 
```

### العمليات المنطقية:
and, or, xor: تنفيذ العمليات المنطقية.

```assembly
and ax, bx  ;  bx و ax بين and تنفيذ
```

###القفزات والشرطيات:

jmp label: القفز إلى تسميات معينة.

cmp dest, src: مقارنة الوجهة بالمصدر.

je label: القفز إذا كانت القيم متساوية.

```assembly
cmp ax, 10
je equal_label   ;   10 تساوي ax اذا كانت equal_label القفز الى 
```



## الأمثلة العملية
برنامج يجمع رقمين ويخزن النتيجة:
```assembly
section .data
    num1 db 5
    num2 db 10
    result db 0

section .text
    global _start
_start:
    mov al, [num1]
    add al, [num2]
    mov [result], al

    ; إنهاء البرنامج
    mov eax, 1
    xor ebx, ebx
    int 0x80
```

##فهم العناوين والذاكرة

 SI و DI الذاكرة تُستخدم لتخزين البيانات والتعليمات. يمكن الوصول إلى العناوين باستخدام السجلات المؤشرةمثل


##استدعاء الدوال
ret والعودة باستخدام callالدوال تُسهل إعادة استخدام الكود. يمكن استدعاء دالة باستخدام 

```assembly
section .text
    global _start
_start:
    call my_function
    ; ...

my_function:
    ; تعليمات الدالة
    ret
```


### الأسئلة العميقة (للفهم الكامل)

#### 1. لماذا نستخدم لغة التجميع بدلاً من لغات البرمجة عالية المستوى؟
لغة التجميع تُستخدم عندما نحتاج إلى تحكم دقيق في كيفية تنفيذ التعليمات على مستوى العتاد. تسمح لنا بكتابة برامج ذات أداء عالٍ جداً وتُستخدم في البرامج التي تتطلب كفاءة عالية مثل أنظمة التشغيل.

#### 2. ما الفرق بين `AX` و `BX`؟
السجلان `AX` و `BX` هما سجلات أغراض عامة، ولكن `AX` يُستخدم بشكل شائع كـ accumulator (المجمّع) للعمليات الحسابية، في حين أن `BX` يُستخدم عادة كمؤشر للذاكرة.

#### 3. ما هو دور المكدس (Stack)؟
المكدس هو بنية بيانات تُستخدم لتخزين البيانات بشكل مؤقت. يُستخدم غالباً في استدعاء الدوال وإدارة المتغيرات المحلية. العمليات على المكدس تتبع مبدأ "الأخير دخولاً، الأول خروجاً" (LIFO).

#### 4. ما هي التعليمات الشرطية ولماذا نستخدمها؟
التعليمات الشرطية مثل `je` و `cmp` تسمح بتنفيذ تعليمات معينة بناءً على نتيجة مقارنة أو حالة ما، مما يسمح بإضافة منطق للبرنامج.

#### 5. كيف يتم استدعاء الدوال في لغة التجميع؟
يمكن استدعاء الدوال باستخدام تعليمة `call` التي تقوم بحفظ عنوان العودة إلى المكدس ثم تقفز إلى الدالة المطلوبة، وبعد انتهاء الدالة يتم استخدام تعليمة `ret` للعودة إلى مكان الاستدعاء.


### - أسئلة إضافية لفهم أعمق

#### 1. ما هي الفائدة من استخدام لغة التجميع بدلاً من اللغات عالية المستوى؟
لغة التجميع توفر تحكمًا أكبر في المكونات الصلبة للحاسوب وتسمح بتطوير برامج عالية الأداء، خاصة في الحالات التي يكون فيها الأداء أو التحكم الدقيق ضروريًا، مثل برمجة الأنظمة أو التعامل مع الأجهزة مباشرة.

#### 2. لماذا تحتوي المعالجات على سجلات متعددة مثل AX وBX وCX؟
السجلات توفر طريقة سريعة للوصول إلى البيانات والعمل عليها داخل وحدة المعالجة المركزية. وجود عدة سجلات يسمح بتنفيذ العمليات بشكل أسرع لأنها تتفادى الحاجة للوصول المتكرر إلى الذاكرة.

#### 3. ماذا يحدث إذا لم أستخدم تعليمات مثل `global _start` في برنامجي؟
تعليمة `global _start` ضرورية لأنها تحدد نقطة البداية لبرنامجك، وهي التعليمة التي تبدأ وحدة المعالجة المركزية بتنفيذها عند تشغيل البرنامج.

#### 4. لماذا يجب علينا استخدام الأقسام مثل `.data` و `.text` في برامج التجميع؟
استخدام الأقسام ينظم البرنامج. قسم `.data` لتخزين البيانات الثابتة مثل المتغيرات، وقسم `.text` لتخزين التعليمات التنفيذية. هذه البنية تساعد على فصل البيانات عن التعليمات لسهولة القراءة والتطوير.

#### 5. ما هي المخاطر المرتبطة بالتعامل مع المكدس (stack) بشكل خاطئ؟
إذا تم التعامل مع المكدس بشكل خاطئ، يمكن أن تحدث مشاكل مثل الكتابة فوق البيانات المهمة أو تجاوز العناوين، مما قد يؤدي إلى حدوث أخطاء أو حتى انهيار البرنامج.

#### 6. كيف يمكن تحسين أداء البرنامج باستخدام لغة التجميع؟
تحسين الأداء يمكن أن يتم عن طريق تقليل عدد التعليمات المستخدمة، استخدام السجلات بكفاءة، وتقليل الوصول إلى الذاكرة. كما يمكن تحسين القفزات وتكرار الحلقات لتقليل الزمن المستغرق.

#### 7. لماذا يتم استخدام سجلات مثل `SP` و `BP` لإدارة المكدس؟
السجل `SP` (Stack Pointer) يُستخدم للإشارة إلى أعلى المكدس ويساعد في العمليات مثل دفع وسحب البيانات، بينما يُستخدم `BP` (Base Pointer) للوصول إلى المتغيرات المحلية داخل المكدس.

#### 8. ما هو الفرق بين التعليمات الشرطية مثل `je` و `jne`؟
تعليمة `je` (Jump if Equal) تقفز إلى تسمية معينة إذا كانت القيم متساوية بعد عملية مقارنة، بينما `jne` (Jump if Not Equal) تقفز إذا كانت القيم غير متساوية.

#### 9. كيف تعمل تعليمات `cmp` و `jmp` معًا في لغة التجميع؟
تعليمة `cmp` تقوم بمقارنة قيمتين دون تغييرهما، وتعليمات `jmp` تنفذ القفز بناءً على نتيجة المقارنة، مثل القفز إذا كانت القيم متساوية (`je`) أو إذا كانت غير متساوية (`jne`).

#### 10. لماذا تعتبر لغة التجميع صعبة التعلم مقارنة باللغات الحديثة؟
لغة التجميع تتطلب معرفة عميقة بعمل الحاسوب الداخلي ومعالجة البيانات على مستوى منخفض. بالإضافة إلى ذلك، يجب على المبرمج التعامل مع تفاصيل دقيقة مثل إدارة الذاكرة والسجلات، مما يجعلها أكثر تعقيدًا مقارنة باللغات عالية المستوى التي تخفي هذه التفاصيل.
